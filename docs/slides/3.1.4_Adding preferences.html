<!DOCTYPE html>
<!--
Copyright 2010 Google Inc.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

Original slides: Marcin Wichary (mwichary@google.com)
Modifications: Ernest Delgado (ernestd@google.com)
Alex Russell (slightlyoff@chromium.org)

landslide modifications: Adam Zapletal (adamzap@gmail.com)
Nicolas Perriault (nperriault@gmail.com)
-->
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, user-scalable=no" />
        <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <title>Adding preferences</title>
        <!-- Styles -->
        
        <link rel="stylesheet" media="print" href="./fiwaretheme/css/print.css">
        <link rel="stylesheet" media="screen, projection" href="./fiwaretheme/css/screen.css">
        
        
        <!-- /Styles -->
        <!-- Javascripts -->
        
        <script type="text/javascript" src="./fiwaretheme/js/slides.js"></script>
        
        
        <!-- /Javascripts -->
    </head>
    <body>
        <div id="blank"></div>
        <div class="presentation">
            <div id="current_presenter_notes">
                <div id="presenter_note"></div>
            </div>
            <div class="slides">
                
                <div class="slide-wrapper">
                    <section class="slide cover">
                        

                        <header class="slide-header"><h1>Adding preferences</h1><h2>Application Mashup (WireCloud) course @ http://edu.fiware.org</h2></header>
                        <img class="fiware-contact" src="fiwaretheme/images/FIWARE-contact.png"/>
                        <img class="fiware-logo" src="fiwaretheme/images/FIWARE-full.png"/>
                        <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops-full.png"/>

                        <div class="navigation-tip">Use <kbd class="key">←</kbd> and <kbd class="key">→</kbd> to move around. Press <kbd class="key">h</kbd> for getting more info</div>
                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide section-title">
                        

                        <header class="section-title-header">
                            <h1>Adding preferences</h1>
                            <h2><h2>Introduction</h2></h2>
                        </header>

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide">
                        

                        
                        <header class="slide-header">
                            <h2>Introduction</h2>
                        </header>
                        
                        <div class="contents"><p>This widget represents the reference implementation of the "Adding preferences"
tutorial. This tutorial is based on previous tutorials were we have used a
hardcoded value of the API key for the weather underground service. This may be
good enough for a basic version of the widget, but in the real world this
would be better implemented as a preference.</p>
<p>For this tutorial, we're are going to use the proposed solution from the "[Making requests and wiring][prev_tutorial]" tutorial as base. You can download
the code of the widget using this <a href="attachments/Example2Skel.zip">link</a>.</p>
<p>[prev_tutorial]: 3.1.3_Making\ requests\ and\ wiring</p></div>
                        

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            <aside class="page_number">
                            3/19
                            </aside>
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide section-title">
                        

                        <header class="section-title-header">
                            <h1>Adding preferences</h1>
                            <h2><h2>Adding preferences to the <code>config.xml</code></h2></h2>
                        </header>

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide has_code">
                        

                        
                        <header class="slide-header">
                            <h2>Adding preferences to the <code>config.xml</code></h2>
                        </header>
                        
                        <div class="contents"><p>The first step for adding a preference is declaring it in the <code>config.xml</code> file.
This can be accomplished by adding a <code>preference</code> element into the
<code>preferences</code> element. The final result should look like:</p>
<div class="highlight"><pre>...

    <span class="nt">&lt;preferences&gt;</span>
        <span class="nt">&lt;preference</span>
            <span class="na">name=</span><span class="s">&quot;api_key&quot;</span>
            <span class="na">type=</span><span class="s">&quot;text&quot;</span>
            <span class="na">description=</span><span class="s">&quot;Weather Underground API key&quot;</span>
            <span class="na">label=</span><span class="s">&quot;API key&quot;</span>
        <span class="nt">/&gt;</span>
    <span class="nt">&lt;/preferences&gt;</span>

...
</pre></div>
</div>
                        

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            <aside class="page_number">
                            5/19
                            </aside>
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide">
                        

                        
                        <header class="slide-header">
                            <h2>Adding preferences to the <code>config.xml</code></h2>
                        </header>
                        
                        <div class="contents"><p>Description of the attributes:</p>
<ul>
<li>The <code>name</code> attribute will be use to reference this preference when using the
  javascript API</li>
<li>The <code>type</code> attribute indicates the type of data this preference is going to
  store. Valid values are: boolean, list, number, password and text</li>
<li>The <code>label</code> attribute will be used, for example, in the user interface to
  ask the user for a value for this preference. Also, this attribute can be
  translated whereas the name attribute not</li>
<li>The <code>description</code> attribute is used to provided a more description about the
  preference</li>
</ul></div>
                        

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            <aside class="page_number">
                            6/19
                            </aside>
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide has_code">
                        

                        
                        <header class="slide-header">
                            <h2>Adding preferences to the <code>config.xml</code></h2>
                        </header>
                        
                        <div class="contents"><p>This is the same declaration but using RDF (turtle):</p>
<div class="highlight"><pre><span class="err">...</span>
    <span class="nc">wire:hasPlatformPreference</span> <span class="p">[</span> <span class="o">a</span> <span class="na">wire:PlatformPreference</span> <span class="p">;</span>
            <span class="nf">rdfs:label</span> <span class="s">&quot;API key&quot;</span> <span class="p">;</span>
            <span class="nf">dcterms:description</span> <span class="s">&quot;Weather Underground API key&quot;</span> <span class="p">;</span>
            <span class="nf">dcterms:title</span> <span class="s">&quot;api_key&quot;</span> <span class="p">;</span>
            <span class="nf">wire:index</span> <span class="s">&quot;0&quot;</span> <span class="p">;</span>
            <span class="nf">wire:type</span> <span class="s">&quot;text&quot;</span> <span class="p">]</span> <span class="p">;</span>
<span class="p">.</span><span class="err">..</span>
</pre></div>
</div>
                        

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            <aside class="page_number">
                            7/19
                            </aside>
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide">
                        

                        
                        <header class="slide-header">
                            <h2>Adding preferences to the <code>config.xml</code></h2>
                        </header>
                        
                        <div class="contents"><p>Preferences of type <code>list</code> need to provide the list of options to be provided in
the user interface. This is accomplished by means of using the <code>option</code> element.
This element requires two attributes:</p>
<ul>
<li>The <code>value</code> attribute is the value that will be returned if the user selects
  this option.</li>
<li>The <code>label</code> attribute will be used in the user interface when referencing this
  option/value. This attribute can be translated.</li>
</ul></div>
                        

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            <aside class="page_number">
                            8/19
                            </aside>
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide has_code">
                        

                        
                        <header class="slide-header">
                            <h2>Adding preferences to the <code>config.xml</code></h2>
                        </header>
                        
                        <div class="contents"><p>This is an example of how to declare a list preference:</p>
<div class="highlight"><pre>...
    <span class="nt">&lt;preferences&gt;</span>
        <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;list&quot;</span> <span class="na">type=</span><span class="s">&quot;list&quot;</span> <span class="na">label=</span><span class="s">&quot;list&quot;</span> <span class="na">description=</span><span class="s">&quot;list preference&quot;</span> <span class="na">default=</span><span class="s">&quot;default&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;default&quot;</span> <span class="na">label=</span><span class="s">&quot;Default value&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span> <span class="na">label=</span><span class="s">&quot;value1&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span> <span class="na">label=</span><span class="s">&quot;value2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/preference&gt;</span>
    <span class="nt">&lt;/preferences&gt;</span>
...
</pre></div>
</div>
                        

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            <aside class="page_number">
                            9/19
                            </aside>
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide section-title">
                        

                        <header class="section-title-header">
                            <h1>Adding preferences</h1>
                            <h2><h2>Basic usage</h2></h2>
                        </header>

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide">
                        

                        
                        <header class="slide-header">
                            <h2>Basic usage</h2>
                        </header>
                        
                        <div class="contents"><p>Once declared the users preference in the widget or operator descriptor, you
will be able to read the current value of the preference using the
<a href="https://wirecloud.readthedocs.org/en/latest/widgetapi/widgetapi/#mashupplatformprefsget-method"><code>MashupPlatform.prefs.get</code></a> method. This method will return a value
using the type associated with the type of the preference:</p>
<ul>
<li><code>string</code> for preferences of type <code>text</code>, <code>password</code> and <code>list</code></li>
<li><code>number</code> for preferences of type <code>number</code></li>
<li>and <code>boolean</code> for <code>boolean</code> preferences</li>
</ul></div>
                        

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            <aside class="page_number">
                            11/19
                            </aside>
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide has_code">
                        

                        
                        <header class="slide-header">
                            <h2>Basic usage</h2>
                        </header>
                        
                        <div class="contents"><p>For example, taking into account the code used in previous tutorials:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">getForecastByCoord</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">getForecastByCoord</span><span class="p">(</span><span class="nx">coord</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onError</span><span class="p">)</span> <span class="p">{</span>

    <span class="p">...</span>

    <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;http://api.wunderground.com/api/&#39;</span> <span class="o">+</span> <span class="nx">API_KEY</span> <span class="o">+</span> <span class="s1">&#39;/conditions/forecast/q/&#39;</span><span class="p">;</span>
    <span class="nx">url</span> <span class="o">+=</span> <span class="nx">coord</span><span class="p">.</span><span class="nx">lat</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nx">coord</span><span class="p">.</span><span class="nx">lon</span><span class="p">;</span>
    <span class="nx">url</span> <span class="o">+=</span> <span class="s1">&#39;.json&#39;</span><span class="p">;</span>

    <span class="nx">MashupPlatform</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">makeRequest</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span>

    <span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
                        

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            <aside class="page_number">
                            12/19
                            </aside>
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide has_code">
                        

                        
                        <header class="slide-header">
                            <h2>Basic usage</h2>
                        </header>
                        
                        <div class="contents"><p>Should be transformed to:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">getForecastByCoord</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">getForecastByCoord</span><span class="p">(</span><span class="nx">coord</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onError</span><span class="p">)</span> <span class="p">{</span>

    <span class="p">...</span>

    <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;http://api.wunderground.com/api/&#39;</span> <span class="o">+</span> <span class="nx">MashupPlatform</span><span class="p">.</span><span class="nx">prefs</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;api_key&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/conditions/forecast/q/&#39;</span><span class="p">;</span>
    <span class="nx">url</span> <span class="o">+=</span> <span class="nx">coord</span><span class="p">.</span><span class="nx">lat</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nx">coord</span><span class="p">.</span><span class="nx">lon</span><span class="p">;</span>
    <span class="nx">url</span> <span class="o">+=</span> <span class="s1">&#39;.json&#39;</span><span class="p">;</span>

    <span class="nx">MashupPlatform</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">makeRequest</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span>

    <span class="p">...</span>
<span class="p">};</span>
</pre></div>

<p>After this change, the <code>API_KEY</code> constant is not used anymore, so you can safely remove it from the source code.</p></div>
                        

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            <aside class="page_number">
                            13/19
                            </aside>
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide section-title">
                        

                        <header class="section-title-header">
                            <h1>Adding preferences</h1>
                            <h2><h2>Reacting to preference changes</h2></h2>
                        </header>

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide has_code">
                        

                        
                        <header class="slide-header">
                            <h2>Reacting to preference changes</h2>
                        </header>
                        
                        <div class="contents"><p>Some times widgets need to react to changes in the preferences. This can be
accomplished using the
<a href="https://wirecloud.readthedocs.org/en/latest/widgetapi/widgetapi/#mashupplatformprefsregistercallback-method"><code>MashupPlatform.prefs.registerCallback</code></a> method. For
example, we can make use of this support for displaying an alert message to the
user just in case the new value for the api-key preference is not valid:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">updateMissingAPIKeyAlert</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">updateMissingAPIKeyAlert</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">MashupPlatform</span><span class="p">.</span><span class="nx">prefs</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;api_key&#39;</span><span class="p">).</span><span class="nx">trim</span><span class="p">().</span><span class="nx">length</span> <span class="o">!==</span> <span class="mi">16</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;api-key-alert&#39;</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;hide&#39;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;api-key-alert&#39;</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;hide&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">MashupPlatform</span><span class="p">.</span><span class="nx">prefs</span><span class="p">.</span><span class="nx">registerCallback</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">new_values</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;api_key&#39;</span> <span class="k">in</span> <span class="nx">new_values</span><span class="p">)</span> <span class="p">{</span>
       <span class="nx">updateMissingAPIKeyAlert</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
                        

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            <aside class="page_number">
                            15/19
                            </aside>
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide has_code">
                        

                        
                        <header class="slide-header">
                            <h2>Reacting to preference changes</h2>
                        </header>
                        
                        <div class="contents"><p>Evidently, this only check the value of the preference when this is changed, so
you need to call manually the <code>updateMissingAPIKeyAlert</code> function when the widget
is loaded. This can be accomplished using the following code:</p>
<div class="highlight"><pre><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">updateMissingAPIKeyAlert</span><span class="p">();</span>
<span class="p">},</span> <span class="kc">true</span><span class="p">);</span>
</pre></div>
</div>
                        

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            <aside class="page_number">
                            16/19
                            </aside>
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide section-title">
                        

                        <header class="section-title-header">
                            <h1>Adding preferences</h1>
                            <h2><h2>Testing it</h2></h2>
                        </header>

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide">
                        

                        
                        <header class="slide-header">
                            <h2>Testing it</h2>
                        </header>
                        
                        <div class="contents"><p>Once implemented our new widget we should test if it works as expected. This
widget has the same functionallity provided by the widget created by following
the steps of the "[Making requests and wiring][prev_tutorial]"</p>
<p>You can download both our implementation of the <a href="attachments/CoNWeT_weather-example_3.0.4.wgt">widget</a> as the
<a href="attachments/CoNWeT_weather-mashup-example_1.1.0.wgt">mashup</a> example.</p></div>
                        

                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            <aside class="page_number">
                            18/19
                            </aside>
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
                <div class="slide-wrapper">
                    <section class="slide back-cover">
                        
                        <div>Thanks!</div>
                        <img class="fiware-contact" src="fiwaretheme/images/FIWARE-contact.png"/>
                        <img class="fiware-logo" src="fiwaretheme/images/FIWARE-full.png"/>
                        <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops-full.png"/>
                        
                        <footer>
                            
                            <aside class="source">Source: <a href="3.1.4_Adding preferences.md">3.1.4_Adding preferences.md</a></aside>
                            
                            
                            
                            <img class="fiware-logo" src="fiwaretheme/images/FIWARE.png" />
                            <img class="fiware-lab-ops-logo" src="fiwaretheme/images/FIWARE-lab-ops.png" />
                            
                        </footer>
                        <div class="presenter_notes">
                            <header><h1>Presenter Notes</h1></header>
                            <section>
                            
                            </section>
                        </div>
                    </section>
                </div>
                
            </div>
        </div>
        
        <div id="toc" class="sidebar hidden">
            <h2>Table of Contents</h2>
            <table>
                <caption>Table of Contents</caption>
                
                <tr id="toc-row-1">
                    <th><a href="#slide1">Adding preferences</a></th>
                    <td><a href="#slide1">1</a></td>
                </tr>
                
                
                <tr id="toc-row-2" class="sub">
                    <th><a href="#slide2">Introduction</a></th>
                    <td><a href="#slide2">2</a></td>
                </tr>
                
                <tr id="toc-row-3" class="sub">
                    <th><a href="#slide3">Introduction</a></th>
                    <td><a href="#slide3">3</a></td>
                </tr>
                
                <tr id="toc-row-4" class="sub">
                    <th><a href="#slide4">Adding preferences to the <code>config.xml</code></a></th>
                    <td><a href="#slide4">4</a></td>
                </tr>
                
                <tr id="toc-row-5" class="sub">
                    <th><a href="#slide5">Adding preferences to the <code>config.xml</code></a></th>
                    <td><a href="#slide5">5</a></td>
                </tr>
                
                <tr id="toc-row-6" class="sub">
                    <th><a href="#slide6">Adding preferences to the <code>config.xml</code></a></th>
                    <td><a href="#slide6">6</a></td>
                </tr>
                
                <tr id="toc-row-7" class="sub">
                    <th><a href="#slide7">Adding preferences to the <code>config.xml</code></a></th>
                    <td><a href="#slide7">7</a></td>
                </tr>
                
                <tr id="toc-row-8" class="sub">
                    <th><a href="#slide8">Adding preferences to the <code>config.xml</code></a></th>
                    <td><a href="#slide8">8</a></td>
                </tr>
                
                <tr id="toc-row-9" class="sub">
                    <th><a href="#slide9">Adding preferences to the <code>config.xml</code></a></th>
                    <td><a href="#slide9">9</a></td>
                </tr>
                
                <tr id="toc-row-10" class="sub">
                    <th><a href="#slide10">Basic usage</a></th>
                    <td><a href="#slide10">10</a></td>
                </tr>
                
                <tr id="toc-row-11" class="sub">
                    <th><a href="#slide11">Basic usage</a></th>
                    <td><a href="#slide11">11</a></td>
                </tr>
                
                <tr id="toc-row-12" class="sub">
                    <th><a href="#slide12">Basic usage</a></th>
                    <td><a href="#slide12">12</a></td>
                </tr>
                
                <tr id="toc-row-13" class="sub">
                    <th><a href="#slide13">Basic usage</a></th>
                    <td><a href="#slide13">13</a></td>
                </tr>
                
                <tr id="toc-row-14" class="sub">
                    <th><a href="#slide14">Reacting to preference changes</a></th>
                    <td><a href="#slide14">14</a></td>
                </tr>
                
                <tr id="toc-row-15" class="sub">
                    <th><a href="#slide15">Reacting to preference changes</a></th>
                    <td><a href="#slide15">15</a></td>
                </tr>
                
                <tr id="toc-row-16" class="sub">
                    <th><a href="#slide16">Reacting to preference changes</a></th>
                    <td><a href="#slide16">16</a></td>
                </tr>
                
                <tr id="toc-row-17" class="sub">
                    <th><a href="#slide17">Testing it</a></th>
                    <td><a href="#slide17">17</a></td>
                </tr>
                
                <tr id="toc-row-18" class="sub">
                    <th><a href="#slide18">Testing it</a></th>
                    <td><a href="#slide18">18</a></td>
                </tr>
                
                
                
                <tr id="toc-row-19">
                    <th><a href="#slide19">-</a></th>
                    <td><a href="#slide19">19</a></td>
                </tr>
                
                
            </table>
        </div>
        
        <div id="help" class="sidebar hidden">
            <h2>Help</h2>
            <table>
                <caption>Help</caption>
                <tr>
                    <th>Table of Contents</th>
                    <td>t</td>
                </tr>
                <tr>
                    <th>Exposé</th>
                    <td>ESC</td>
                </tr>
                <tr>
                    <th>Full screen slides</th>
                    <td>e</td>
                </tr>
                <tr>
                    <th>Presenter View</th>
                    <td>p</td>
                </tr>
                <tr>
                    <th>Source Files</th>
                    <td>s</td>
                </tr>
                <tr>
                    <th>Slide Numbers</th>
                    <td>n</td>
                </tr>
                <tr>
                    <th>Toggle screen blanking</th>
                    <td>b</td>
                </tr>
                <tr>
                    <th>Show/hide slide context</th>
                    <td>c</td>
                </tr>
                <tr>
                    <th>Notes</th>
                    <td>2</td>
                </tr>
                <tr>
                    <th>Help</th>
                    <td>h</td>
                </tr>
            </table>
        </div>
        <script>main()</script>
    </body>
</html>